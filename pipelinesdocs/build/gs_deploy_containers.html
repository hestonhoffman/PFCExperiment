<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2019"><meta name="DC.rights.owner" content="(C) Copyright 2019"><meta name="DC.type" content="topic"><meta name="description" content="In previous steps, you provisioned a cluster, created and built MySQL and WordPress containers, and created a service to ensure that your containers are able to communicate within your cluster. Next, you’ll deploy your containers to all three of the namespaces that you created on your cluster."><meta name="DC.format" content="HTML5"><meta name="DC.identifier" content="deploy-your-wordpress-and-mysql-containers"><link rel="stylesheet" type="text/css" href="commonltr.css"><title>Deploy your WordPress and MySQL containers</title></head><body id="deploy-your-wordpress-and-mysql-containers"><main role="main"><article role="article" aria-labelledby="ariaid-title1"><h1 class="title topictitle1" id="ariaid-title1">Deploy your WordPress and MySQL containers</h1><div class="body"><p class="shortdesc">In previous steps, you provisioned a cluster, created and built MySQL and WordPress containers, and created a service to ensure that your containers are able to communicate within your cluster. Next, you’ll deploy your containers to all three of the namespaces that you created on your cluster.</p><section class="section" id="deploy-your-wordpress-and-mysql-containers__deploy-to-wordpress-dev"><h2 class="title sectiontitle">Deploy to wordpress-dev</h2><p class="p">First, deploy your containers to the wordpress-dev namespace. After you've created your first deployment, you can save time by using it as a template for future deployments.</p><ol class="ol"><li class="li"><p class="p">Enter your deployment details:</p><ol class="ol" type="a"><li class="li"><p class="p">From your Pipelines project, click <strong class="ph b">Deploy</strong>.</p></li><li class="li"><p class="p">Click <strong class="ph b">Select Cluster</strong>, and select your cluster.</p></li><li class="li"><p class="p">Click <strong class="ph b">Select Namespace</strong> and select your namespace, wordpress-dev.</p></li><li class="li"><p class="p">Enter a deployment name, <em class="ph i">my-wordpress-deployment</em>, and a short description.</p></li></ol></li><li class="li"><p class="p">Add and configure your WordPress container:</p><ol class="ol" type="a"><li class="li"><p class="p">Click <strong class="ph b">Select Container</strong> and select your WordPress container, k8s-wordpress.</p></li><li class="li"><p class="p">Click <strong class="ph b">Select Image Tag</strong> and select the most recent build. At this point there should be only one, but the most recent build is always at the top of the list.</p></li><li class="li"><p class="p">Click <strong class="ph b">Add Container</strong>. The k8s-wordpress container is listed under the Containers tab.</p></li><li class="li"><p class="p">Click <strong class="ph b">k8s-wordpress</strong>.</p></li><li class="li"><p class="p">Click <strong class="ph b">Port Mappings</strong> and then click <strong class="ph b">Add Port Mapping</strong>. Add a mapping with the following settings:</p><ul class="ul"><li class="li"><p class="p"><strong class="ph b">Name</strong>: <em class="ph i">http</em></p></li><li class="li"><p class="p"><strong class="ph b">Container Port</strong>: <em class="ph i">80</em></p></li><li class="li"><p class="p"><strong class="ph b">Host Port</strong>: <em class="ph i">80</em></p></li><li class="li"><p class="p"><strong class="ph b">Protocol</strong>: <em class="ph i">TCP</em></p></li></ul></li><li class="li"><p class="p">Click <strong class="ph b">Save Port Mapping</strong>.</p></li><li class="li"><p class="p">Click <strong class="ph b">Environment Variables</strong>. Use the following settings:</p><ul class="ul"><li class="li"><p class="p"><strong class="ph b">Environment Variable Name</strong>: <em class="ph i">WORDPRESS_DB_PASSWORD</em></p></li><li class="li"><p class="p"><strong class="ph b">Type of Variable</strong>: value</p></li><li class="li"><p class="p"><strong class="ph b">Value</strong>: Enter a password for your container.</p></li></ul></li><li class="li"><p class="p">Click <strong class="ph b">Save Variable</strong>.</p></li><li class="li"><p class="p">Click <strong class="ph b">Environment Variables</strong>. Use the following settings:</p><ul class="ul"><li class="li"><p class="p">Environment Variable Name: <em class="ph i">WORDPRESS_DB_HOST</em></p></li><li class="li"><p class="p">Type of Variable: value</p></li><li class="li"><p class="p">Value: <em class="ph i">k8s-mysql:3306</em></p></li></ul></li><li class="li"><p class="p">Click <strong class="ph b">Save Variable</strong>.</p></li></ol></li><li class="li"><p class="p">Add and configure your MySQL container</p><ol class="ol" type="a"><li class="li"><p class="p">Click <strong class="ph b">Containers</strong>.</p></li><li class="li"><p class="p">Click <strong class="ph b">Select Container</strong> and select your MySQL container, k8s-mysql.</p></li><li class="li"><p class="p">Click <strong class="ph b">Select Image Tag</strong> and select the most recent build.</p></li><li class="li"><p class="p">Click <strong class="ph b">Add Container</strong>. The k8s-mysql container appears under the Containers tab.</p></li><li class="li"><p class="p">Click <strong class="ph b">k8s-MySQL</strong>.</p></li><li class="li"><p class="p">Click <strong class="ph b">Port Mappings</strong> and then click <strong class="ph b">Add Port Mapping</strong>. Add a mapping with the following settings:</p><ul class="ul"><li class="li"><p class="p"><strong class="ph b">Name</strong>: <em class="ph i">mysql</em></p></li><li class="li"><p class="p"><strong class="ph b">Container Port</strong>: <em class="ph i">3306</em></p></li><li class="li"><p class="p"><strong class="ph b">Host Port</strong>: <em class="ph i">3306</em></p></li><li class="li"><p class="p"><strong class="ph b">Protocol</strong>: <em class="ph i">TCP</em></p></li></ul></li><li class="li"><p class="p">Click <strong class="ph b">Save Port Mapping</strong>.</p></li><li class="li"><p class="p">Click <strong class="ph b">Environment Variables</strong>. Enter the following settings:</p><ul class="ul"><li class="li"><p class="p"><strong class="ph b">Environment Variable Name</strong>: <em class="ph i">MYSQL_ROOT_PASSWORD</em></p></li><li class="li"><p class="p"><strong class="ph b">Type of Variable</strong>: value</p></li><li class="li"><p class="p"><strong class="ph b">Value</strong>: Use the same password that you set for WORDPRESS_DB_PASSWORD above.</p></li></ul></li><li class="li"><p class="p">Click <strong class="ph b">Save Variable</strong>.</p></li></ol></li></ol></section></div></article></main></body></html>